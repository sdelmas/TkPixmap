#
# This file is a Makefile for libdes.  If it has the name "Makefile.in",
# it is a template for a Makefile; to generate the actual Makefile,
# run "./configure", which is a configuration script generated by the
# "autoconf" program (constructs like "@foo@" will get replaced in the
# actual Makefile).

#----------------------------------------------------------------
# Things you can change to personalize the Makefile for your own
# site (you can make these changes in either Makefile.in or
# Makefile, but changes to Makefile will get lost if you re-run
# the configuration script).
#----------------------------------------------------------------

# Default top-level directories in which to install architecture-
# specific files (exec_prefix) and machine-independent files such
# as scripts (prefix).  The values specified here may be overridden
# at configure-time with the --exec-prefix and --prefix options
# to the "configure" script.

exec_prefix =	/usr/local
prefix =	/usr/local

LIB_DIR=$(exec_prefix)/lib
BIN_DIR=$(exec_prefix)/bin
INC_DIR=$(prefix)/include
MAN_DIR=$(prefix)/man

SHELL=/bin/sh

# if your system doesn't provide pipe remove -DZPIPE
OPTS0= -DZPIPE

# if your system doesn't provide strdup add -DNEED_STRDUP
OPTS1= @XPM_OPT1@

# if your system doesn't provide strcasecmp add -DNEED_STRCASECMP
OPTS2= @XPM_OPT2@

#----------------------------------------------------------------
# The information below is modified by the configure script when
# Makefile is generated from Makefile.in.  You shouldn't normally
# modify any of this stuff by hand.
#----------------------------------------------------------------

PICFLAGS=@PICFLAGS@
SHDIR=@SHDIR@
SHLIBSO=@SHLIBSO_XPM@
SHARED_LIBS=
LD_DIR=@LD_DIR@
F1=[
F2=]

INSTALL =               @INSTALL@
INSTALL_PROGRAM =       @INSTALL_PROGRAM@
INSTALL_DATA =          @INSTALL_DATA@
RANLIB =		@RANLIB@
LN_S =			@LN_S@

#----------------------------------------------------------------
# The information below should be usable as is.  The configure
# script won't modify it and you shouldn't need to modify it
# either.
#----------------------------------------------------------------

CC =		@CC@
LD_FLAGS = 	@LDFLAGS@
CC_SWITCHES =	@XPM_CFLAGS@ $(OPTS0) $(OPTS1) $(OPTS2) -I.
CFLAGS =	-O2 $(CC_SWITCHES)

HEADERS = xpm.h

SRCS =  data.c create.c misc.c rgb.c scan.c parse.c hashtable.c \
	XpmCrBufFrI.c XpmCrDataFrP.c XpmCrPFrBuf.c XpmRdFToI.c XpmWrFFrI.c \
	XpmCrBufFrP.c XpmCrIFrBuf.c XpmCrPFrData.c XpmRdFToP.c XpmWrFFrP.c \
	XpmCrDataFrI.c XpmCrIFrData.c XpmRdFToData.c XpmWrFFrData.c

OBJS =	data.o create.o misc.o rgb.o scan.o parse.o hashtable.o \
	XpmCrBufFrI.o XpmCrDataFrP.o XpmCrPFrBuf.o XpmRdFToI.o XpmWrFFrI.o \
	XpmCrBufFrP.o XpmCrIFrBuf.o XpmCrPFrData.o XpmRdFToP.o XpmWrFFrP.o \
	XpmCrDataFrI.o XpmCrIFrData.o XpmRdFToData.o XpmWrFFrData.o

all: libXpm.a

libXpm.a: $(SHDIR) $(SHLIBSO) $(OBJS)
	-@rm -f libXpm.a; \
	ar cr libXpm.a $(OBJS); \
	$(RANLIB) libXpm.a

install: libXpm.a
	cp libXpm.a $(LIB_DIR)/libXpm.a
	$(RANLIB) $(LIB_DIR)/libXpm.a
	chmod 644 $(LIB_DIR)/libXpm.a
	cp xpm.h $(INC_DIR)/xpm.h
	chmod 644 $(INC_DIR)/xpm.h

$(SHDIR):
	-@if [ ! -d $(SHDIR) ] ; then \
		echo "Making directory $(SHDIR)"; \
		mkdir $(SHDIR); \
	else true; \
	fi

$(SHLIBSO): $(OBJS)
	@SHLIBSO_BLD@

Makefile: ./Makefile.in
	$(SHELL) config.status

clean:
	-@rm -f libXpm* *.o shared/* core errs *~ \#* TAGS *.E a.out errors

distclean: clean
	rm -f Makefile config.status

.c.o:
	@SHAREDCC@
	$(CC) -c $(CC_SWITCHES) $<





