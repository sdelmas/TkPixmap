#
# @configure_input@
# This file is a Makefile for Tk.  If it has the name "Makefile.in",
# it is a template for a Makefile; to generate the actual Makefile,
# run "./configure", which is a configuration script generated by the
# "autoconf" program (constructs like "@foo@" will get replaced in the
# actual Makefile).

#----------------------------------------------------------------
# Things you can change to personalize the Makefile for your own
# site (you can make these changes in either Makefile.in or
# Makefile, but changes to Makefile will get lost if you re-run
# the configuration script).
#----------------------------------------------------------------

# Default top-level directories in which to install architecture-
# specific files (exec_prefix) and machine-independent files such
# as scripts (prefix).  The values specified here may be overridden
# at configure-time with the --exec-prefix and --prefix options
# to the "configure" script.

exec_prefix =	@exec_prefix@
prefix =	@prefix@

# Directory in which to install the library of Tk scripts and demos
# (note: you can set the TK_LIBRARY environment variable at run-time to
# override the compiled-in location):
TK_LIBRARY =	@TK_LIBRARY_NAME@

# Directory in which to install the XF package.
XF_LIBRARY =	@XF_LIBRARY_NAME@

# Directory in which to install the xfemacs library file (if
# you are currently building TkSteal):
XF_EMACS_LIBRARY = @TK_LIBRARY_NAME@

# Directory in which to install the archive libtk.a:
LIB_DIR =	$(exec_prefix)/lib

# The directory where the X11 library files are installed.
X11_LIB_DIR =  @X11_LIB_DIR@

# The name for the new libtk.
TK_LIB_NAME =	tk

# The name for the new wish executable.
WISH_NAME =	@WISH_NAME@

# Directory in which to install the program wish:
BIN_DIR =	$(exec_prefix)/bin

# Directory in which to install the include file tk.h:
INCLUDE_DIR =	$(prefix)/include

# Top-level directory for manual entries:
MAN_DIR =	$(prefix)/man

# Directory in which to install manual entry for wish:
MAN1_DIR =	$(MAN_DIR)/man1

# Directory in which to install manual entries for Tk's C library
# procedures:
MAN3_DIR =	$(MAN_DIR)/man3

# Directory in which to install manual entries for the built-in
# Tcl commands implemented by Tk:
MANN_DIR =	$(MAN_DIR)/mann

# The directory containing the Tcl sources and headers appropriate
# for this version of Tk ("@srcdir@" will be replaced or has already
# been replaced by the configure script):
TCL_DIR =	@TCL_SOURCE@

# The directory containing the Tk sources and headers
# ("@srcdir@" will be replaced or has already been replaced
# by the configure script):
TK_DIR =	@TK_SOURCE@

# The directory containing the Tk library archive file:
TK_BIN_DIR =	@TK_SOURCE@

# To change the compiler switches, for example to change from -O
# to -g, change the following line:
CFLAGS = 	@CFLAGS@ @CPPFLAGS@

# Some versions of make, like SGI's, use the following variable to
# determine which shell to use for executing commands:
SHELL =		/bin/sh

#----------------------------------------------------------------
# The information below is modified by the configure script when
# Makefile is generated from Makefile.in.  You shouldn't normally
# modify any of this stuff by hand.
#----------------------------------------------------------------

AC_FLAGS =		@DEFS@
LD_FLAGS = 		@LDFLAGS@
INSTALL =		@INSTALL@
INSTALL_PROGRAM =	@INSTALL_PROGRAM@
INSTALL_DATA =		@INSTALL_DATA@
RANLIB =		@RANLIB@
LN_S =			@LN_S@
SRC_DIR =		@srcdir@
VPATH =			@srcdir@

SHDIR =			@SHDIR@
CC =            	@CC@

PASS_FLAGS =		"CC=$(CC)" "CFLAGS=$(CFLAGS)" "LDFLAGS=$(LDFLAGS)" "TK_LIB_NAME=$(TK_LIB_NAME)" "WISH_NAME=$(WISH_NAME)" "TK_LIBRARY=$(TK_LIBRARY)" "PROTO_FLAGS=$(PROTO_FLAGS)" "LIB_DIR=$(LIB_DIR)" "X11_LIB_DIR=$(X11_LIB_DIR)" "XF_LIBRARY=$(XF_LIBRARY)"

#----------------------------------------------------------------
# The information below should be usable as is.  The configure
# script won't modify it and you shouldn't need to modify it
# either.
#----------------------------------------------------------------

all: prepare
	make wish

prepare: prepareMessage @GET_TARGETS@ $(SHDIR) get-libtk @PATCH_TARGETS@
	./configure -with-config-local

prepareMessage: 
	-@echo "Preparing the source tree..."

wish: $(WISH_NAME)

$(WISH_NAME): @BUILD_TARGETS@
	-@(cd wish; make all $(PASS_FLAGS))

pixmapDemo:
	-@if [ -d libtk ]; then \
		(cd libtk; make all $(PASS_FLAGS)); \
	fi; \
	(cd wish; make pixmapDemo $(PASS_FLAGS))

build-libtk:
	-@if [ -d libtk ]; then \
		(cd libtk; make all $(PASS_FLAGS)); \
	fi

build-libtksteal:
	-@if [ -d libTkSteal ]; then \
		(cd libTkSteal; make all $(PASS_FLAGS)); \
	fi

build-libtkmegawidget:
	-@if [ -d libTkMegaWidget ]; then \
		(cd libTkMegaWidget; make all $(PASS_FLAGS)); \
	fi

build-libtkmobal:
	-@if [ -d libTkMobal ]; then \
		(cd libTkMobal; make all $(PASS_FLAGS)); \
	fi

build-libtkxf:
	-@if [ -d libTkXF ]; then \
		(cd libTkXF; make all $(PASS_FLAGS)); \
	fi

build-libdes:
	-@if [ -d libdes ]; then \
		(cd libdes; make all $(PASS_FLAGS)); \
	fi

build-libxpm:
	-@if [ -d libxpm ]; then \
		(cd libxpm; make all $(PASS_FLAGS)); \
	fi

$(SHDIR):
	-@if [ -d libtk ]; then \
		if [ ! -d libtk/$(SHDIR) ]; then \
			echo "Making directory libtk/$(SHDIR)"; \
			mkdir libtk/$(SHDIR); \
		fi; \
	fi; \
	if [ -d libTkSteal ]; then \
		if [ ! -d libTkSteal/$(SHDIR) ]; then \
			echo "Making directory libTkSteal/$(SHDIR)"; \
			mkdir libTkSteal/$(SHDIR); \
		fi; \
	fi; \
	if [ -d libTkMegaWidget ]; then \
		if [ ! -d libTkMegaWidget/$(SHDIR) ]; then \
			echo "Making directory libTkMegaWidget/$(SHDIR)"; \
			mkdir libTkMegaWidget/$(SHDIR); \
		fi; \
	fi; \
	if [ -d libTkMobal ]; then \
		if [ ! -d libTkMobal/$(SHDIR) ]; then \
			echo "Making directory libTkMobal/$(SHDIR)"; \
			mkdir libTkMobal/$(SHDIR); \
		fi; \
	fi; \
	if [ -d libTkXF ]; then \
		if [ ! -d libTkXF/$(SHDIR) ]; then \
			echo "Making directory libTkXF/$(SHDIR)"; \
			mkdir libTkXF/$(SHDIR); \
		fi; \
	fi

get-libtk:
	-@cp $(TK_BIN_DIR)/libtk.a libtk/lib$(TK_LIB_NAME).a
	@GET_TK_SHARED_OBJECTS@

get-tkpixmap-files:
	-@mkdir ./libtk >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/* >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libtk/* ./libtk >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tk.h ./libtk >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkInt.h ./libtk >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkBitmap.c ./libtk >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkButton.c ./libtk >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkCanvBmap.c ./libtk >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkCanvPs.c ./libtk >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkCanvas.c ./libtk >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkCanvas.h ./libtk >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkConfig.c ./libtk >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkConfig.h ./libtk >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkMenu.c ./libtk >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkMenubutton.c ./libtk >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkWm.c ./libtk >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libtk/bitmap.c ./libtk >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libtk/gif.c ./libtk >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libtk/dpsSupport.c ./libtk >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libtk/raw256.c ./libtk >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libtk/xpm3.c ./libtk >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libtk/uxpm.c ./libtk >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libtk/tkPixmap.c ./libtk >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libtk/tkMain.c ./libtk >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libtk/Makefile.in ./libtk >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/*; \
	mkdir ./libtk/doc >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/doc/* >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/doc/man.macros ./libtk/doc >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/doc/button.n ./libtk/doc >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/doc/canvas.n ./libtk/doc >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/doc/checkbutton.n ./libtk/doc >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/doc/menu.n ./libtk/doc >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/doc/menubutton.n ./libtk/doc >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/doc/options.n ./libtk/doc >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/doc/radiobutton.n ./libtk/doc >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/doc/*; \
	mkdir ./libxpm >/dev/null 2>/dev/null; \
	chmod u+w ./libxpm/* >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libxpm/*.c ./libxpm >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libxpm/*.h ./libxpm >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libxpm/Imakefile ./libxpm >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libxpm/Makefile* ./libxpm >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libxpm/COPYRIGHT ./libxpm >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libxpm/README ./libxpm >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libxpm/CHANGES ./libxpm >/dev/null 2>/dev/null; \
	chmod u+w ./libxpm/* >/dev/null 2>/dev/null; \
	mkdir ./libxpm/X11 >/dev/null 2>/dev/null; \
	chmod u+w ./libxpm/X11/* >/dev/null 2>/dev/null; \
	cp ../TkPixmap/libxpm/X11/*.h ./libxpm/X11 >/dev/null 2>/dev/null; \
	chmod u+w ./libxpm/X11/* >/dev/null 2>/dev/null; \
	mkdir ./doc >/dev/null 2>/dev/null; \
	chmod u+w ./doc/* >/dev/null 2>/dev/null; \
	cp ../TkPixmap/doc/GetPixmap.3 ./doc >/dev/null 2>/dev/null; \
	cp ../TkPixmap/doc/man.macros ./doc >/dev/null 2>/dev/null; \
	cp ../TkPixmap/doc/pinfo.n ./doc >/dev/null 2>/dev/null; \
	cp ../TkPixmap/doc/uxpm.n ./doc >/dev/null 2>/dev/null; \
	chmod u+w ./doc/* >/dev/null 2>/dev/null

get-tkicon-files:
	-@mkdir ./libtk >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/* >/dev/null 2>/dev/null; \
	cp ../TkIcon/libtk/* ./libtk >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tk.h ./libtk >/dev/null 2>/dev/null;\
	cp @TK_SOURCE@/tkInt.h ./libtk >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkCanvas.c ./libtk >/dev/null 2>/dev/null;\
	cp @TK_SOURCE@/tkCanvas.h ./libtk >/dev/null 2>/dev/null; \
	cp ../TkIcon/libtk/tkCanvEdge.c ./libtk >/dev/null 2>/dev/null; \
	cp ../TkIcon/libtk/tkCanvIcon.c ./libtk >/dev/null 2>/dev/null; \
	cp ../TkIcon/libtk/tkCanvLayout.c ./libtk >/dev/null 2>/dev/null; \
	cp ../TkIcon/libtk/tkMain.c ./libtk >/dev/null 2>/dev/null; \
	cp ../TkIcon/libtk/Makefile.in ./libtk >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/*; \
	mkdir ./libtk/doc >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/doc/* >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/doc/man.macros ./libtk/doc>/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/doc/canvas.n ./libtk/doc >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/doc/*; \
	mkdir ./doc >/dev/null 2>/dev/null; \
	chmod u+w ./doc/* >/dev/null 2>/dev/null; \
	cp ../TkIcon/doc/man.macros ./doc >/dev/null 2>/dev/null; \
	cp ../TkIcon/doc/tkiconpane.n ./doc >/dev/null 2>/dev/null; \
	chmod u+w ./doc/* >/dev/null 2>/dev/null; \
	mkdir ./library >/dev/null 2>/dev/null; \
	chmod u+w ./library/* >/dev/null 2>/dev/null; \
	cp ../TkIcon/library/tkIconPaneCmd.tcl ./library >/dev/null 2>/dev/null; \
	cp ../TkIcon/library/tkIconPaneInt.tcl ./library >/dev/null 2>/dev/null; \
	cp ../TkIcon/library/tkMegaWidget.tcl ./library >/dev/null 2>/dev/null; \
	chmod u+w ./library/* >/dev/null 2>/dev/null

get-tksteal-files:
	-@mkdir ./libtk >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/* >/dev/null 2>/dev/null; \
	mkdir ./libTkSteal >/dev/null 2>/dev/null; \
	chmod u+w ./libTkSteal/* >/dev/null 2>/dev/null; \
	cp ../TkSteal/libTkSteal/tkXAccess.c ./libTkSteal >/dev/null 2>/dev/null; \
	cp ../TkSteal/libTkSteal/tkXAccess.h ./libTkSteal >/dev/null 2>/dev/null; \
	cp ../TkSteal/libTkSteal/tkMain.c ./libTkSteal >/dev/null 2>/dev/null; \
	cp ../TkSteal/libTkSteal/Makefile.in ./libTkSteal >/dev/null 2>/dev/null; \
	chmod u+w ./libTkSteal/* >/dev/null 2>/dev/null; \
	mkdir ./doc >/dev/null 2>/dev/null; \
	chmod u+w ./doc/* >/dev/null 2>/dev/null; \
	cp ../TkSteal/doc/man.macros ./doc >/dev/null 2>/dev/null; \
	cp ../TkSteal/doc/tkemacs.n ./doc >/dev/null 2>/dev/null; \
	cp ../TkSteal/doc/tkgs.n ./doc >/dev/null 2>/dev/null; \
	cp ../TkSteal/doc/tksteal.n ./doc >/dev/null 2>/dev/null; \
	cp ../TkSteal/doc/xaccess.n ./doc >/dev/null 2>/dev/null; \
	cp ../TkSteal/doc/xfemacs.n ./doc >/dev/null 2>/dev/null; \
	chmod u+w ./doc/* >/dev/null 2>/dev/null; \
	mkdir ./library >/dev/null 2>/dev/null; \
	chmod u+w ./library/* >/dev/null 2>/dev/null; \
	cp ../TkSteal/library/tkEmacs.tcl ./library >/dev/null 2>/dev/null; \
	cp ../TkSteal/library/tkGS.tcl ./library >/dev/null 2>/dev/null; \
	cp ../TkSteal/library/tkSteal.tcl ./library >/dev/null 2>/dev/null; \
	chmod u+w ./library/* >/dev/null 2>/dev/null; \
	mkdir ./xfemacs >/dev/null 2>/dev/null; \
	chmod u+w ./xfemacs/* >/dev/null 2>/dev/null; \
	cp ../TkSteal/xfemacs/xfemacs.tcl ./xfemacs >/dev/null 2>/dev/null; \
	cp ../TkSteal/xfemacs/xfemacs.sh ./xfemacs >/dev/null 2>/dev/null; \
	cp ../TkSteal/xfemacs/xfemacsc.sh ./xfemacs >/dev/null 2>/dev/null; \
	chmod u+w ./xfemacs/* >/dev/null 2>/dev/null

get-tkmegawidget-files:
	-@mkdir ./libtk >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/* >/dev/null 2>/dev/null; \
	mkdir ./libTkMegaWidget >/dev/null 2>/dev/null; \
	chmod u+w ./libTkMegaWidget/* >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libTkMegaWidget/tkMegaWidget.c ./libTkMegaWidget >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libTkMegaWidget/tkMegaWidget.h ./libTkMegaWidget >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libTkMegaWidget/tkMain.c ./libTkMegaWidget >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libTkMegaWidget/Makefile.in ./libTkMegaWidget >/dev/null 2>/dev/null; \
	chmod u+w ./libTkMegaWidget/* >/dev/null 2>/dev/null; \
	mkdir ./libdes >/dev/null 2>/dev/null; \
	chmod u+w ./libdes/* >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/*.c ./libdes >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/*.h ./libdes >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/*.man ./libdes >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/*.pl ./libdes >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/do* ./libdes >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/PC* ./libdes >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/Imakefile ./libdes >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/Makefile.in ./libdes >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/ARTISTIC ./libdes >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/COPYING ./libdes >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/INSTALL ./libdes >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/README ./libdes >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/makefile.ORIG ./libdes >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/VERSION ./libdes >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/KERBEROS ./libdes >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/libdes/MODES.DES ./libdes >/dev/null 2>/dev/null; \
	chmod u+w ./libdes/* >/dev/null 2>/dev/null; \
	mkdir ./doc >/dev/null 2>/dev/null; \
	chmod u+w ./doc/* >/dev/null 2>/dev/null; \
	cp ../TkMegaWidgetdoc/man.macros ./doc >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/doc/megawidget.n ./doc >/dev/null 2>/dev/null; \
	chmod u+w ./doc/* >/dev/null 2>/dev/null; \
	mkdir ./library >/dev/null 2>/dev/null; \
	chmod u+w ./library/* >/dev/null 2>/dev/null; \
	cp ../TkMegaWidget/library/tkMegaWidget.tcl ./library >/dev/null 2>/dev/null; \
	chmod u+w ./library/* >/dev/null 2>/dev/null

get-tkmobal-files:
	-@mkdir ./libtk >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/* >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkListbox.c ./libtk;\
	chmod u+w ./libtk/* >/dev/null 2>/dev/null; \
	mkdir ./libtk/library >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/library/* >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/library/tk.tcl ./libtk/library;\
	cp @TK_SOURCE@/library/listbox.tcl ./libtk/library;\
	chmod u+w ./libtk/library/* >/dev/null 2>/dev/null; \
	mkdir ./libtk/doc >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/doc/* >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/doc/man.macros ./libtk/doc;\
	cp @TK_SOURCE@/doc/listbox.n ./libtk/doc;\
	chmod u+w ./libtk/doc/* >/dev/null 2>/dev/null; \
	mkdir ./libTkMobal >/dev/null 2>/dev/null; \
	chmod u+w ./libTkMobal/* >/dev/null 2>/dev/null; \
	cp ../TkMobal/libTkMobal/tkMobalExt.c ./libTkMobal >/dev/null 2>/dev/null; \
	cp ../TkMobal/libTkMobal/tkMain.c ./libTkMobal >/dev/null 2>/dev/null; \
	cp ../TkMobal/libTkMobal/Makefile.in ./libTkMobal >/dev/null 2>/dev/null; \
	chmod u+w ./libTkMobal/* >/dev/null 2>/dev/null

get-tkxf-files:
	-@mkdir ./libtk >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/* >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkListbox.c ./libtk;\
	chmod u+w ./libtk/* >/dev/null 2>/dev/null; \
	mkdir ./libtk/library >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/library/* >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/library/tk.tcl ./libtk/library;\
	cp @TK_SOURCE@/library/listbox.tcl ./libtk/library;\
	chmod u+w ./libtk/library/* >/dev/null 2>/dev/null; \
	mkdir ./libtk/doc >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/doc/* >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/doc/man.macros ./libtk/doc;\
	cp @TK_SOURCE@/doc/listbox.n ./libtk/doc;\
	chmod u+w ./libtk/doc/* >/dev/null 2>/dev/null; \
	mkdir ./libTkXF >/dev/null 2>/dev/null; \
	chmod u+w ./libTkXF/* >/dev/null 2>/dev/null; \
	cp ../TkMobal/libTkXF/tkXFExt.c ./libTkXF >/dev/null 2>/dev/null; \
	cp ../TkMobal/libTkXF/tkMain.c ./libTkXF >/dev/null 2>/dev/null; \
	cp ../TkMobal/libTkXF/Makefile.in ./libTkXF >/dev/null 2>/dev/null; \
	chmod u+w ./libTkXF/* >/dev/null 2>/dev/null

get-kanji-files:
	-@mkdir ./libtk >/dev/null 2>/dev/null; \
	chmod u+w ./libtk/* >/dev/null 2>/dev/null; \
	cp @TK_SOURCE@/tkWStr.c ./libtk;\
	cp @TK_SOURCE@/tkKinput2.c ./libtk;\
	cp @TK_SOURCE@/tkCtext.c ./libtk;\
	chmod u+w ./libtk/* >/dev/null 2>/dev/null

patch-tkpixmap-files:
	-@chmod u+w ./libtk/*; \
	chmod u+w ./libtk/doc/*; \
	rm ./libtk/*.rej >/dev/null 2>/dev/null; \
	rm ./libtk/doc/*.rej >/dev/null 2>/dev/null; \
	(cd libtk; patch -l -p1 < ../../TkPixmap/tkPixmap@TK_VERSION@@KANJI_NAME@.pat 1>../TkPixmap.patch.out 2>&1)

patch-tkicon-files:
	-@chmod u+w ./libtk/*; \
	chmod u+w ./libtk/doc/*; \
	rm ./libtk/*.rej >/dev/null 2>/dev/null; \
	rm ./libtk/doc/*.rej >/dev/null 2>/dev/null; \
	(cd libtk; patch -l -p1 < ../../TkIcon/tkIcon@TK_VERSION@.pat 1>../TkIcon.patch.out 2>&1)

patch-tkmobal-files:
	-@chmod u+w ./libtk/*; \
	chmod u+w ./libtk/doc/*; \
	chmod u+w ./libtk/library/*; \
	rm ./libtk/*.rej >/dev/null 2>/dev/null; \
	rm ./libtk/doc/*.rej >/dev/null 2>/dev/null; \
	rm ./libtk/library/*.rej >/dev/null 2>/dev/null; \
	(cd libtk; patch -l -p1 < ../../TkMobal/MListbox.pat 1> ../TkMobal.patch.out 2>&1)

patch-tkxf-files:
	-@chmod u+w ./libtk/*; \
	chmod u+w ./libtk/doc/*; \
	chmod u+w ./libtk/library/*; \
	rm ./libtk/*.rej >/dev/null 2>/dev/null; \
	rm ./libtk/doc/*.rej >/dev/null 2>/dev/null; \
	rm ./libtk/library/*.rej >/dev/null 2>/dev/null; \
	(cd libtk; patch -l -p1 < ../../TkXF/xf.pat 1> ../TkXF.patch.out 2>&1)

make-tkxpmview:
	@if [ -f ./demo.TkPixmap/tkxpmview.tcl ]; then \
		sed -e 's^!pixmap-wish -f^!$(BIN_DIR)/$(WISH_NAME) -f^1' < ./demo.TkPixmap/tkxpmview.tcl > ./demo.TkPixmap/tkxpmview; \
		chmod a+x ./demo.TkPixmap/tkxpmview; \
	fi

make-xfemacs:
	@if [ -f ./xfemacs/xfemacs.tcl ]; then \
		sed -e 's^=steal-wish^=$(BIN_DIR)/steal-wish^1' < ./xfemacs/xfemacs.sh | sed -e 's^/usr/local/lib^$(XF_EMACS_LIBRARY)^g' > ./xfemacs/xfemacs; \
		chmod a+x ./xfemacs/xfemacs; \
		sed -e 's^=steal-wish^=$(BIN_DIR)/steal-wish^1' < ./xfemacs/xfemacsc.sh | sed -e 's^/usr/local/lib^$(XF_EMACS_LIBRARY)^g' > ./xfemacs/xfemacsc; \
		chmod a+x ./xfemacs/xfemacsc; \
	fi

install: install-binaries install-libraries install-includes install-man

install-binaries: make-tkxpmview make-xfemacs
	@for i in $(LIB_DIR) $(BIN_DIR) $(XF_EMACS_LIBRARY); do \
	    if [ ! -d $$i ] ; then \
		echo "Making directory $$i"; \
		mkdir $$i; \
		chmod 755 $$i; \
		else true; \
		fi; \
	    done
	@echo "Installing $(WISH_NAME)"
	@$(INSTALL_PROGRAM) ./wish/$(WISH_NAME) $(BIN_DIR)
	@if [ -f ./libtk/lib$(TK_LIB_NAME).a ]; then \
		echo "Installing lib$(TK_LIB_NAME).a"; \
		$(INSTALL_DATA) ./libtk/lib$(TK_LIB_NAME).a $(LIB_DIR); \
		$(RANLIB) $(LIB_DIR)/lib$(TK_LIB_NAME).a; \
	fi
	@if [ -f ./libTkSteal/libTkSteal.a ]; then \
		echo "Installing libTkSteal.a"; \
		$(INSTALL_PROGRAM) ./libTkSteal/libTkSteal.a $(LIB_DIR); \
	fi
	@if [ -f ./libTkMegaWidget/libTkMegaWidget.a ]; then \
		echo "Installing libTkMegaWidget.a"; \
		$(INSTALL_PROGRAM) ./libTkMegaWidget/libTkMegaWidget.a $(LIB_DIR); \
	fi
	@if [ -f ./libTkMobal/libTkMobal.a ]; then \
		echo "Installing libTkMobal.a"; \
		$(INSTALL_PROGRAM) ./libTkMobal/libTkMobal.a $(LIB_DIR); \
	fi
	@if [ -f ./libTkXF/libTkXF.a ]; then \
		echo "Installing libTkXF.a"; \
		$(INSTALL_PROGRAM) ./libTkXF/libTkXF.a $(LIB_DIR); \
	fi
	@if [ -d ./xfemacs ]; then \
		echo "Installing xfemacs"; \
		$(INSTALL_PROGRAM) ./xfemacs/xfemacs.tcl $(XF_EMACS_LIBRARY); \
		$(INSTALL_PROGRAM) ./xfemacs/xfemacs $(BIN_DIR); \
		$(INSTALL_PROGRAM) ./xfemacs/xfemacsc $(BIN_DIR); \
	fi
	@if [ -f ./demo.TkPixmap/tkxpmview ]; then \
		echo "Installing tkxpmview"; \
		$(INSTALL_PROGRAM) ./demo.TkPixmap/tkxpmview $(BIN_DIR); \
	fi

install-libraries:
	@for i in $(prefix)/lib $(INCLUDE_DIR) $(TK_LIBRARY); do \
	    if [ ! -d $$i ]; then \
		echo "Making directory $$i"; \
		mkdir $$i; \
		chmod 755 $$i; \
		else true; \
		fi; \
	    done
	-@if [ -d ./library ] ; then \
	    for i in tkEmacs.tcl tkGS.tcl tkSteal.tcl tkIconPaneInt.tcl tkIconPaneCmd.tcl tkMegaWidget.tcl; do \
	      if [ -f ./library/$$i ]; then \
	        echo "Installing library/$$i"; \
	        $(INSTALL_DATA) ./library/$$i $(TK_LIBRARY); \
              fi; \
	    done; \
	fi
	-@if [ -d ./libtk/library ] ; then \
	    for i in tk.tcl listbox.tcl; do \
	      if [ -f ./libtk/library/$$i ]; then \
	        echo "Installing library/$$i"; \
	        $(INSTALL_DATA) ./libtk/library/$$i $(TK_LIBRARY); \
              fi; \
	    done; \
	fi

install-includes: 
	@for i in $(INCLUDE_DIR); do \
	    if [ ! -d $$i ] ; then \
		echo "Making directory $$i"; \
		mkdir $$i; \
		chmod 755 $$i; \
		else true; \
		fi; \
	    done
	-@if [ -d ./libtk ] ; then \
	    for i in tk.h; do \
	      if [ -f ./libtk/$$i ]; then \
	        echo "Installing include/$$i"; \
	        $(INSTALL_DATA) ./libtk/$$i $(INCLUDE_DIR); \
              fi; \
	    done; \
	fi
	-@if [ -f ./libTkSteal/tkXAccess.h ]; then \
		echo "Installing tkXAccess.h"; \
		$(INSTALL_PROGRAM) ./libTkSteal/tkXAccess.h $(INCLUDE_DIR); \
	fi
	-@if [ -f ./libTkMegaWidget/tkMegaWidget.h ]; then \
		echo "Installing tkMegaWidget.h"; \
		$(INSTALL_PROGRAM) ./libTkMegaWidget/tkMegaWidget.h $(INCLUDE_DIR); \
	fi

install-man:
	-@for i in $(MAN_DIR) $(MAN1_DIR) $(MAN3_DIR) $(MANN_DIR); do \
	    if [ ! -d $$i ]; then \
		echo "Making directory $$i"; \
		mkdir $$i; \
		chmod 755 $$i; \
		else true; \
		fi; \
	    done;
	-@if [ -d $(SRC_DIR)/doc ]; then \
	    cd $(SRC_DIR)/doc; for i in GetPixmap.3; do \
	        if [ -f $$i ]; then \
	            echo "Installing doc/$$i"; \
	            rm -f $(MAN3_DIR)/$$i; \
	            sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
	    	        $$i > $(MAN3_DIR)/$$i; \
	            chmod 444 $(MAN3_DIR)/$$i; \
                fi; \
	        done; \
	    fi
	-@if [ -d $(SRC_DIR)/doc ]; then \
	    cd $(SRC_DIR)/doc; for i in megawidget.n tkiconpane.n tkemacs.n tkgs.n tksteal.n xaccess.n xfemacs.n pinfo.n uxpm.n; do \
	        if [ -f $$i ]; then \
	            echo "Installing doc/$$i"; \
	            rm -f $(MANN_DIR)/$$i; \
	            sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
		        $$i > $(MANN_DIR)/$$i; \
	            chmod 444 $(MANN_DIR)/$$i; \
                fi; \
	        done; \
	    fi
	-@if [ -d $(SRC_DIR)/libtk/doc ] ; then \
	    cd $(SRC_DIR)/libtk/doc; for i in button.n canvas.n checkbutton.n listbox.n menu.n menubutton.n options.n radiobutton.n; do \
	        if [ -f $$i ]; then \
	            echo "Installing doc/$$i"; \
	            rm -f $(MANN_DIR)/$$i; \
	            sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
		        $$i > $(MANN_DIR)/$$i; \
	            chmod 444 $(MANN_DIR)/$$i; \
                fi; \
	        done; \
	fi

Makefile: $(SRC_DIR)/Makefile.in
	$(SHELL) config.status

clean:
	-@rm -f *.o shared/* core errs *~ \#* TAGS *.E a.out errors tktest *.orig config.log config.cache $(WISH_NAME); \
	if [ -d ./lib ]; then \
		(cd lib; make clean); \
	fi; \
	if [ -d ./libtk ]; then \
		(cd libtk; make clean); \
	fi; \
	if [ -d ./libTkSteal ]; then \
		(cd libTkSteal; make clean); \
	fi; \
	if [ -d ./libTkMegaWidget ]; then \
		(cd libTkMegaWidget; make clean); \
	fi; \
	if [ -d ./libTkMobal ]; then \
		(cd libTkMobal; make clean); \
	fi; \
	if [ -d ./libTkXF ]; then \
		(cd libTkXF; make clean); \
	fi; \
	if [ -d ./libdes ]; then \
		(cd libdes; make clean); \
	fi; \
	if [ -d ./libxpm ]; then \
		(cd libxpm; make clean); \
	fi; \
	if [ -d ./wish ]; then \
		(cd wish; make clean); \
	fi

distclean: clean
	rm -f Makefile config.status

